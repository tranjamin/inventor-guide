\documentclass[a4paper,12pt]{report}
\usepackage[utf8]{inputenc}
\usepackage[sfdefault]{roboto}

\usepackage[usenames,dvipsnames]{xcolor}  
\usepackage{soul}

\usepackage{amssymb}
\usepackage{titling}
\usepackage{graphicx}
\graphicspath{{./assets/icons}{./assets}}

\usepackage{calc}
\usepackage{wrapfig}
\usepackage{subcaption}
\usepackage{float}
\usepackage{booktabs}
\usepackage{makecell}
\usepackage{array}
\usepackage{fontawesome5}
\usepackage{setspace}
\usepackage[export]{adjustbox}
\usepackage[margin=20mm]{geometry}
\usepackage{multicol}
\usepackage{subfiles}
\usepackage{lipsum}
\usepackage[color, leftbars]{changebar}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage[skins]{tcolorbox}
\usepackage[parfill]{parskip}
\usepackage[hidelinks]{hyperref}
\usepackage{fancyhdr}
\usepackage{tikz}
\usepackage{tikzpagenodes}
\usepackage{etoolbox}
\usepackage{tcolorbox}
\usepackage{fancybox}

\pagestyle{fancy}
\usetikzlibrary{calc}
\fancyfoot{}


\setlength\changebarsep{10pt}

% DEFINE NEW COLOURS
\definecolor{InventorBoxBlue}{RGB}{240, 250, 255}
\definecolor{InventorBorderBlue}{RGB}{137, 208, 239}
\definecolor{InventorBoxGray}{RGB}{227, 227, 227}
\definecolor{InventorBorderGray}{RGB}{215, 215, 215}

% STYLING FOR HOTKEYS
\newtcbox{\hotkeybox}
    {enhanced,
    nobeforeafter,
    tcbox raise base,
    boxrule=0.4pt,
    top=0mm,
    bottom=0mm,
    right=0mm,
    left=0mm,
    arc=2pt,
    boxsep=2pt,
    before upper={\vphantom{dlg}}, 
    colframe=InventorBorderGray,
    coltext=black,
    colback=InventorBoxGray}

\newcommand{\hotkey}[1]{
    \footnotesize
    \begin{hotkeybox}
        {#1} 
    \end{hotkeybox}
    \normalsize        
}

% STYLING FOR APP COMMANDS
\newtcbox{\appcommandbox}{
    enhanced,
    nobeforeafter,
    tcbox raise base,
    boxrule=0.8pt,
    top=0mm,
    bottom=0mm,
    right=0mm,
    left=0mm,
    arc=0.25pt,
    boxsep=2pt,
    before upper={\vphantom{dlg}},
    colframe=InventorBorderBlue,
    coltext=black,
    colback=InventorBoxBlue}

\newcommand{\appcommand}[1]{
    \footnotesize
    \begin{appcommandbox}
        {#1} 
    \end{appcommandbox}
    \normalsize        
        }
    
% STYLING FOR APP OPTIONS
\newtcbox{\appoptionbox}{
    enhanced,
    nobeforeafter,
    tcbox raise base,
    boxrule=0.8pt,
    top=0mm,
    bottom=0mm,
    right=0mm,
    left=0mm,
    arc=0.25pt,
    boxsep=2pt,
    before upper={\vphantom{dlg}},
    colframe=InventorBorderBlue,
    coltext=black,
    colback=InventorBoxBlue}

\newcommand{\appoption}[1]{
\footnotesize
\begin{appcommandbox}
    {#1} 
\end{appcommandbox}
\normalsize        
    }


% STYLING FOR INLINE GRAPHICS
\newlength\myheight
\newlength\mydepth
\settototalheight\myheight{Xygp}
\settodepth\mydepth{Xygp}
\setlength\fboxsep{0pt}
\newcommand*\inlinegraphics[1]{
  \settototalheight\myheight{Xygp}
  \settodepth\mydepth{Xygp}
  \raisebox{-\mydepth}{\includegraphics[height=\myheight]{#1}}
}

% STYLING FOR ARROW
\newcommand{\then} {
    $\rightarrow$
}

% STYLING FOR RIBBON GRAPHICS
\newcommand{\ribbon}[1]{
    \includegraphics[width=\textwidth]{{#1}}
}

% STYLING FOR EXAMPLE PICTURES
\newcommand{\example}[1]{
    \includegraphics[height=120px]{{#1}}
}

% DIFFICULTY COLOURS
\newcommand{\easydifficulty} {\cbcolor{ForestGreen}}
\newcommand{\mediumdifficulty} {\cbcolor{BurntOrange}}
\newcommand{\harddifficulty} {\cbcolor{Maroon}}

% ENVIRONMENTS
\newenvironment{when-to-read}
{\begin{tcolorbox}[colback=gray!5!white,colframe=gray!75!black,title=WHEN TO READ]}
{\end{tcolorbox}}

\newenvironment{where-to-find}
{\begin{tcolorbox}[colback=orange!5!white,colframe=orange!75!black,title=WHERE TO FIND]}
{\end{tcolorbox}}

\newcommand{\oneliner}[1]{
    \emph{{#1}}
}


% MARS COLOURS
\usepackage{xcolor}
\definecolor{turbo_purple}{RGB}{112,105,160}
\definecolor{partner_bronze}{RGB}{205,127,50}
\definecolor{partner_silver}{RGB}{170,169,173}
\definecolor{partner_gold}{RGB}{212,175,55}

% SECTION STYLES
\usepackage{titlesec}
\titleformat{\chapter}
    [display]
    {\normalfont\Huge\bfseries\centering}
    {}
    {1em}
    {\vspace{-4em}}
    [\vspace{-1em}]

\titleformat{\section}
    [display]
    {\normalfont\huge\bfseries\color{turbo_purple}}
    {}
    {1em}
    {}
    []

\titleformat{\subsection}
    [display]
    {\normalfont\Large\bfseries\color{gray}}
    {}
    {1em}
    {\vspace{-2em}}
    [\vspace{0em}]

\titleformat{\subsubsection}
    [display]
    {\normalfont\large\bfseries\color{turbo_purple}}
    {}
    {1em}
    {\vspace{0em}}
    [\vspace{-0.7em}]

% RANDOM STUFF
\renewcommand{\headrulewidth}{0pt}
\setlength{\headheight}{25pt}
\lhead{}
\rhead{\begin{tikzpicture}[remember picture,overlay]
\draw  let \p1=($(current page.north)-(current page header area.south)$),
      \n1={veclen(\x1,\y1)} in
node [inner sep=0,outer sep=0,below left] 
      at (current page.north east){\includegraphics[height=\n1]{./assets/Sponsorship Header - Solid.png}};
\end{tikzpicture}}
\lfoot{\begin{tikzpicture}[remember picture,overlay]
\draw  let \p1=($(current page footer area.north)-(current page.south)$),
      \n1={veclen(\x1,\y1)} in
node [inner sep=0,outer sep=0,above right] 
      at (current page.south west){\includegraphics[height=\n1]{./assets/Sponsorship Footer - Solid.png}};
\end{tikzpicture}}
\cfoot{\sffamily\selectfont\thepage}
\patchcmd{\chapter}{\thispagestyle{plain}}{\thispagestyle{fancy}}{}{}

% ------------------------------------- %

\begin{document}

% TITLE PAGE AND CONTENTS
\begin{titlepage}
    \newgeometry{right=0mm,left=0mm,top=20mm,bottom=0mm}
    \begin{center}
        \vspace*{15mm}
        \includegraphics[width=0.7\paperwidth]{./assets/Logo (Dark).png} \\
        \vspace{1cm}
        \Huge MARS CAD Guide \\
        \huge \textcolor{turbo_purple}{Autodesk Inventor 2023}
    \end{center}
    \vfill
    \includegraphics[height=0.5\paperheight, right]{./assets/Pattern - PCB (Solid).png}
    \vspace*{10mm}
\end{titlepage}
\restoregeometry
\tableofcontents

\NewCommandCopy{\oldchapter}{\chapter}
\renewcommand{\chapter}[1]{\cbend \oldchapter{#1}}

\NewCommandCopy{\oldsection}{\section}
\renewcommand{\section}[1]{\cbend \oldsection{#1} \cbstart}

\NewCommandCopy{\oldsubsection}{\subsection}
\renewcommand{\subsection}[1]{\cbend \oldsubsection{#1} \cbstart}

\NewCommandCopy{\oldsubsubsection}{\subsubsection}
\renewcommand{\subsubsection}[1]{\cbend \oldsubsubsection{#1} \cbstart}

%\newpage\subfile{chapters/CrashCourse.tex}
\subfile{chapters/Introduction.tex}
% \subfile{chapters/Collaborate.tex}
% \subfile{chapters/UI.tex}
% \subfile{chapters/Tools.tex}
% \subfile{chapters/WorkFeatures.tex}
\subfile{chapters/2DSketch.tex}
% \subfile{chapters/3DSketch.tex}

\subfile{chapters/3DModel.tex}
% \subfile{chapters/Assemble.tex}
% \subfile{chapters/Design.tex}
% \subfile{chapters/Analysis.tex}
% \subfile{chapters/Annotations.tex}
% \subfile{chapters/Studio.tex}
% \subfile{chapters/Drawings.tex}
% \subfile{chapters/Presentations.tex}
% \subfile{chapters/SheetMetal.tex}
% \subfile{chapters/CAM.tex}
% \subfile{chapters/BIM.tex}
% \subfile{chapters/FusionInteropability.tex}
% \subfile{chapters/3DPrint.tex}
% \subfile{chapters/Electromechanical.tex}
% \subfile{chapters/PipeTube.tex}
% \subfile{chapters/CableHarness.tex}
% \subfile{chapters/MoldDesign.tex}
% \subfile{chapters/Weldment.tex}
% \subfile{chapters/Nesting.tex}
% \subfile{chapters/Programming.tex}

\subfile{chapters/Acknowledgements.tex}

\end{document}
